<!DOCTYPE html>
<html>
<head>
  <title>WhatsApp Chat</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{url_for('static', path='/css/style.css')}}" type="text/css">
</head>
<body>
  <div class="container">
    <div id="chat-window" class="d-flex flex-column">
      <div id="chat-header" class="d-flex justify-content-between align-items-center">
        <h5>WhatsApp Chat</h5>
        <button id="open-join-form" class="btn btn-success">Join</button>
      </div>
      <div id="chat" class="flex-grow-1" style="display: none;">
        <ul id="messages" class="list-unstyled"></ul>
      </div>
      <div class="input-group" id="message-input" style="display: none;">
        <input type="text" id="message" class="form-control" placeholder="Type your message">
        <div class="input-group-append">
          <button id="send" class="btn btn-primary">Send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Username and Password Modal -->
  <div class="modal fade" id="usernamePasswordModal" tabindex="-1" role="dialog" aria-labelledby="usernamePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="usernamePasswordModalLabel">Enter Your Username and Password</h5>
        </div>
        <div class="modal-body">
          <input type="text" id="usernameInput" class="form-control" placeholder="Your username">
          <input type="password" id="passwordInput" class="form-control mt-3" placeholder="Your password">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button id="register" class="btn btn-primary">Register</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Include Bootstrap and jQuery JavaScript -->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="{{url_for('static', path='/js/script.js')}}"></script>
  <script>
    $(document).ready(function() {
      $('#open-join-form').click(function() {
        $('#usernamePasswordModal').modal('show');
      });

      $('#register').click(function() {
        var username = $('#usernameInput').val();
        var password = $('#passwordInput').val();
        // Send username and password to the backend for registration
        // You can implement this part using AJAX or WebSocket
        console.log("Registering user:", username, password);
        // Example AJAX call:
        /*
        $.ajax({
          type: "POST",
          url: "/register",
          data: {username: username, password: password},
          success: function(response) {
            console.log("Registration successful:", response);
          },
          error: function(xhr, status, error) {
            console.error("Error registering user:", error);
          }
        });
        */
      });
    });
  </script>
</body>
</html>
